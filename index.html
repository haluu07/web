<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>G·ª≠i ƒë·∫øn emüíñ</title>
    <style>
      /* 
         * C·∫§U H√åNH GIAO DI·ªÜN CHUNG
         * - Font ch·ªØ: Dancing Script (m·ªÅm m·∫°i, l√£ng m·∫°n)
         * - M√†u n·ªÅn: ƒêen (#000)
         * - ·∫®n thanh cu·ªôn (overflow: hidden) ƒë·ªÉ t·∫°o kh√¥ng gian v√¥ t·∫≠n
         */
      @import url("https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap");

      body,
      html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        /* Hi·ªáu ·ª©ng C·ª±c Quang (Aurora) */
        background: linear-gradient(135deg, #000000 0%, #1a0b2e 50%, #000000 100%);
        background-size: 400% 400%;
        animation: aurora 15s ease infinite;
        overflow: hidden;
        font-family: "Dancing Script", cursive;
        user-select: none; /* NgƒÉn ng∆∞·ªùi d√πng b√¥i ƒëen ch·ªØ */
      }

      /* 
         * HI·ªÜU ·ª®NG SAO TR·ªúI (STAR BACKGROUND)
         * - C√°c ng√¥i sao s·∫Ω ƒë∆∞·ª£c t·∫°o b·∫±ng JS v√† style t·∫°i ƒë√¢y
         */
      .star {
        position: absolute;
        background: white;
        border-radius: 50%;
        opacity: 0.8;
        animation: twinkle 2s infinite ease-in-out alternate;
      }

      @keyframes twinkle {
        from { opacity: 0.2; transform: scale(0.8); }
        to { opacity: 1; transform: scale(1.2); }
      }
      
      @keyframes aurora {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      /* Hi·ªáu ·ª©ng Sao BƒÉng */
      .meteor {
        position: absolute;
        width: 2px;
        height: 100px;
        background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0.8));
        transform: rotate(45deg);
        pointer-events: none;
        animation: meteorFall 2s linear infinite;
        opacity: 0;
      }

      @keyframes meteorFall {
        0% { transform: translate(0, 0) rotate(45deg); opacity: 1; }
        100% { transform: translate(300px, 300px) rotate(45deg); opacity: 0; }
      }
      
      @keyframes aurora {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      /* Hi·ªáu ·ª©ng Sao BƒÉng */
      .meteor {
        position: absolute;
        width: 2px;
        height: 100px;
        background: linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,0.8));
        transform: rotate(45deg);
        pointer-events: none;
        animation: meteorFall 2s linear infinite;
        opacity: 0;
      }

      @keyframes meteorFall {
        0% { transform: translate(0, 0) rotate(45deg); opacity: 1; }
        100% { transform: translate(300px, 300px) rotate(45deg); opacity: 0; }
      }

      /* Hi·ªáu ·ª©ng ƒêom ƒë√≥m (Fireflies) */
      .firefly {
        position: absolute;
        width: 4px;
        height: 4px;
        background: #ffff00; /* M√†u v√†ng */
        border-radius: 50%;
        box-shadow: 0 0 10px #ffff00, 0 0 20px #ffff00; /* Ph√°t s√°ng */
        pointer-events: none;
        opacity: 0.8;
        z-index: 10;
        transition: transform 0.2s ease-out; /* Di chuy·ªÉn m∆∞·ª£t khi t∆∞∆°ng t√°c */
      }

      /* 
         * CONTAINER CHO C√ÅC PH·∫¶N T·ª¨ TR√îI N·ªîI (TEXT & IMAGES)
         */
      #floating-container {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none; /* ƒê·ªÉ click xuy√™n qua xu·ªëng n·ªÅn */
        opacity: 0; /* ·∫®n ban ƒë·∫ßu */
        transition: opacity 2s ease-in;
      }
      
      /* M√ÄN H√åNH CH·ªú (INTRO) */
      #intro-screen {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 20000;
        background: radial-gradient(circle, #2b1055, #000); /* N·ªÅn ·∫£o di·ªáu h∆°n */
        transition: opacity 1.5s ease-out;
        cursor: pointer;
      }
      
      /* ENVELOPE (B√å TH∆Ø) 3D */
      .envelope-container {
        position: relative;
        width: 300px;
        height: 200px;
        background: #f08080;
        border-radius: 0 0 10px 10px;
        box-shadow: 0 0 20px rgba(255, 105, 180, 0.5);
        display: flex;
        justify-content: center;
        align-items: center;
      }
      
      .envelope-container::before {
        content: "";
        position: absolute;
        width: 0;
        height: 0;
        border-left: 150px solid transparent;
        border-right: 150px solid transparent;
        border-top: 100px solid #ff6f61; /* N·∫Øp tr√™n (m√†u t·ªëi h∆°n ch√∫t) */
        top: 0;
        left: 0;
        transform-origin: top;
        transition: transform 1s ease-in-out 0.5s; /* Delay ƒë·ªÉ tim bay l√™n xong m·ªõi m·ªü? Kh√¥ng, m·ªü n·∫Øp tr∆∞·ªõc */
        z-index: 5;
      }
      
      .envelope-container::after {
        content: "";
        position: absolute;
        width: 0;
        height: 0;
        border-left: 150px solid #ffb6c1; /* C√°nh tr√°i */
        border-right: 150px solid #ffb6c1; /* C√°nh ph·∫£i */
        border-bottom: 100px solid #ffc0cb; /* ƒê√°y */
        border-top: 100px solid transparent;
        top: 0;
        left: 0;
        z-index: 4;
        border-radius: 0 0 10px 10px;
      }
      
      /* L√° th∆∞ / Tr√°i tim b√™n trong (B·ªè n·ªÅn tr·∫Øng) */
      .letter {
        position: absolute;
        width: 180px;
        height: 90px; /* Thu nh·ªè l·∫°i ƒë·ªÉ v·ª´a trong phong b√¨ */
        background: transparent; /* B·ªè n·ªÅn tr·∫Øng */
        bottom: 0;
        z-index: 3;
        transition: transform 1s ease-in-out 1s, z-index 0.1s ease-in-out 1.5s; /* Bay l√™n sau khi n·∫Øp m·ªü */
        display: flex;
        justify-content: center;
        align-items: center;
        /* border-radius: 5px; */
        /* box-shadow: 0 -5px 10px rgba(0,0,0,0.1); */
      }
      
      .letter-heart {
        font-size: 80px;
        color: #ff1493;
        animation: pulse 1s infinite;
        display: flex; /* CƒÉn gi·ªØa SVG */
        justify-content: center;
        align-items: center;
        width: 100%;
        height: 100%;
      }
      
      .letter-heart svg {
        width: 80px;
        height: 80px;
        fill: #ff1493;
        filter: drop-shadow(0 0 5px rgba(255,20,147,0.5));
      }

      /* Animation m·ªü n·∫Øp th∆∞ */
      .envelope-container.open::before {
        transform: rotateX(180deg);
        z-index: 2; /* N·∫Øp m·ªü ra sau l√° th∆∞ nh∆∞ng tr∆∞·ªõc box */
      }
      
      /* Animation l√° th∆∞ bay l√™n */
      .envelope-container.open .letter {
        transform: translateY(-120px); 
        /* 
         * QUAN TR·ªåNG: 
         * Gi·ªØ z-index th·∫•p h∆°n pocket (4) trong l√∫c bay l√™n ƒë·ªÉ t·∫°o hi·ªáu ·ª©ng "chui ra t·ª´ trong".
         * Sau khi bay xong m·ªõi ƒë·ªïi z-index l√™n tr√™n c√πng d·ªÉ ko b·ªã che.
         */
        z-index: 6; 
        transition: transform 1s ease-in-out 0.8s, z-index 0.1s ease-in-out 1.8s; /* Delay z-index ƒë·∫øn cu·ªëi c√πng */
      }
      
      #intro-text {
        font-size: 20px;
        color: #fff;
        margin-top: 150px; /* ƒê·∫©y xu·ªëng d∆∞·ªõi b√¨ th∆∞ */
        font-family: "Dancing Script", cursive;
        opacity: 0.8;
        animation: blink 2s infinite;
      }

      /* 
         * STYLE CHO CH·ªÆ TR√îI N·ªîI
         * - M√†u h·ªìng neon (#ff69b4, #ff1493)
         * - Hi·ªáu ·ª©ng b√≥ng (text-shadow) ƒë·ªÉ t·∫°o c·∫£m gi√°c ph√°t s√°ng
         */
      .floating-text {
        position: absolute;
        color: #ff69b4;
        font-size: 24px;
        text-shadow:
          0 0 10px #ff1493,
          0 0 20px #ff1493;
        white-space: nowrap;
        opacity: 0;
        animation:
          floatUp 15s linear forwards,
          fadeInOut 15s ease-in-out forwards;
      }

      /* 
         * STYLE CHO ·∫¢NH TR√îI N·ªîI (POLAROID)
         * - Th√™m vi·ªÅn tr·∫Øng ƒë·ªÉ t·∫°o c·∫£m gi√°c ·∫£nh in
         */
      /* 
         * STYLE CHO ·∫¢NH TR√îI N·ªîI (POLAROID)
         * - Th√™m vi·ªÅn tr·∫Øng ƒë·ªÉ t·∫°o c·∫£m gi√°c ·∫£nh in
         */
      .floating-image {
        position: absolute;
        width: 220px; /* Gi·∫£m ch√∫t ƒë·ªÉ b√π cho vi·ªÅn */
        height: 220px;
        object-fit: cover;
        /* Vi·ªÅn Polaroid */
        border: 8px solid #fff;
        border-bottom: 30px solid #fff; 
        background-color: #fff;
        box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        transform-origin: center;
        opacity: 0;
        animation: floatImage 20s linear forwards, fadeInOut 20s ease-in-out forwards;
      }

      /* Animation chung cho vi·ªác xu·∫•t hi·ªán v√† bi·∫øn m·∫•t */
      @keyframes fadeInOut {
        0% {
          opacity: 0;
        }
        10% {
          opacity: 0.8;
        }
        90% {
          opacity: 0.8;
        }
        100% {
          opacity: 0;
        }
      }

      /* Animation bay l√™n cho ch·ªØ */
      @keyframes floatUp {
        from {
          transform: translateY(100vh) scale(0.8);
        }
        to {
          transform: translateY(-10vh) scale(1.1);
        }
      }

      /* Animation bay l∆° l·ª≠ng cho ·∫£nh (ng·∫´u nhi√™n h∆°n) */
      @keyframes floatImage {
        0% {
          transform: translate(0, 100vh) rotate(0deg);
        }
        100% {
          transform: translate(var(--moveX), -20vh) rotate(360deg);
        }
      }

      /* 
         * M√ÄN H√åNH T·ªé T√åNH (KHI DOUBLE CLICK)
         * - N·∫±m gi·ªØa m√†n h√¨nh
         * - Ban ƒë·∫ßu ·∫©n (display: none ho·∫∑c opacity: 0)
         */
      /* 
         * M√ÄN H√åNH T·ªé T√åNH (KHI DOUBLE CLICK)
         * - CƒÉn gi·ªØa b·∫±ng Flexbox ƒë·ªÉ ·ªïn ƒë·ªãnh h∆°n, tr√°nh b·ªã l·ªách tr√™n mobile
         */
      #love-message {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        z-index: 9999; /* ƒê·∫£m b·∫£o lu√¥n n·∫±m tr√™n c√πng */
        pointer-events: none;
        
        /* Tr·∫°ng th√°i ·∫©n ban ƒë·∫ßu */
        opacity: 0;
        transform: scale(0.5);
        transition: all 0.5s ease-out;
      }

      #love-message.show {
        opacity: 1;
        transform: scale(1);
      }

      #love-message h1 {
        font-size: 4rem;
        color: #ff1493;
        text-shadow:
          0 0 20px #ff69b4,
          0 0 40px #ff1493;
        margin: 0;
        margin: 0;
        /* animation: pulse 1.5s infinite; */ /* ƒê√£ t·∫Øt hi·ªáu ·ª©ng nh·ªãp tim ƒë·ªÉ ch·ªØ ƒë·ª©ng y√™n */
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      /* Hi·ªáu ·ª©ng con tr·ªè nh·∫•p nh√°y cho Typewriter */
      .typing-cursor::after {
        content: "|";
        animation: blink 1s step-start infinite;
        color: #ff1493;
        margin-left: 5px;
      }
      
      @keyframes blink {
        50% { opacity: 0; }
      }

      /* H∆∞·ªõng d·∫´n nh·ªè ·ªü g√≥c */
      #hint {
        position: fixed;
        bottom: 20px;
        width: 100%;
        text-align: center;
        color: rgba(255, 192, 203, 0.8); /* TƒÉng ƒë·ªô r√µ */
        font-size: 24px; /* TƒÉng k√≠ch th∆∞·ªõc ch·ªØ */
        pointer-events: none;
        font-family: "Dancing Script", cursive;
        z-index: 10001; /* ƒê·∫£m b·∫£o n·∫±m tr√™n c√πng */
      }
      /* RESPONSIVE CHO ƒêI·ªÜN THO·∫†I */
      @media screen and (max-width: 768px) {
        
        /* Ch·ªØ th√¥ng ƒëi·ªáp ch√≠nh: D√πng ƒë∆°n v·ªã vw ƒë·ªÉ t·ª± co gi√£n theo chi·ªÅu ngang */
        #love-message h1 {
          font-size: 8vw; 
          padding: 0 15px; /* Padding an to√†n 2 b√™n */
        }

        /* 
         * ·∫¢nh "Polaroid" tr√™n mobile:
         * - Gi·∫£m k√≠ch th∆∞·ªõc t·ªïng th·ªÉ
         * - Gi·∫£m ƒë·ªô d√†y vi·ªÅn tr·∫Øng cho c√¢n ƒë·ªëi
         */
        .floating-image {
          width: 80px;
          height: 80px;
          border: 4px solid #fff;
          border-bottom: 12px solid #fff; /* Vi·ªÅn d∆∞·ªõi m·ªèng h∆°n */
        }

        /* Ch·ªØ bay float: C·ªë ƒë·ªãnh c·ª° ch·ªØ nh·ªè ƒë·ªÉ d·ªÖ ƒë·ªçc, tr√°nh che m√†n h√¨nh */
        .floating-text {
          font-size: 16px !important; 
          letter-spacing: 1px;
        }
        
        /* TƒÉng k√≠ch th∆∞·ªõc n√∫t nh·∫°c ƒë·ªÉ d·ªÖ b·∫•m b·∫±ng ng√≥n tay */
        #music-control {
          width: 44px; /* To h∆°n ch√∫t */
          height: 44px;
          bottom: 30px; /* N√¢ng cao l√™n tr√°nh vu·ªët nh·∫ßm thanh Home ·∫£o */
          right: 15px;
        }
        
        /* H∆∞·ªõng d·∫´n text nh·ªè l·∫°i m·ªôt ch√∫t so v·ªõi Desktop nh∆∞ng v·∫´n to r√µ */
        #hint {
           font-size: 18px;
           bottom: 15px;
           opacity: 1;
        }
      }
      /* N√∫t b·∫≠t/t·∫Øt nh·∫°c g√≥c m√†n h√¨nh */
      #music-control {
        position: fixed;
        bottom: 20px;
        right: 20px;
        z-index: 10000;
        background: rgba(255, 105, 180, 0.2);
        border: 1px solid #ff69b4;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        display: flex;
        justify-content: center;
        align-items: center;
        color: #fff;
        font-size: 20px;
        cursor: pointer;
        animation: spin 4s linear infinite;
        /* Ch∆∞a quay khi ch∆∞a ph√°t nh·∫°c */
        animation-play-state: paused;
        opacity: 0; /* ·∫®n n√∫t nh·∫°c ban ƒë·∫ßu */
        transition: opacity 1s;
      }

      @keyframes spin {
        100% { transform: rotate(360deg); }
      }
      
      /* Hi·ªáu ·ª©ng s√≥ng nh·∫°c (Visualizer) */
      .music-wave {
        position: absolute;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        border: 2px solid rgba(255, 105, 180, 0.5);
        opacity: 0;
        z-index: -1;
        pointer-events: none;
        animation: musicWave 2s infinite cubic-bezier(0, 0, 0.2, 1);
        /* M·∫∑c ƒë·ªãnh pause */
        animation-play-state: paused;
      }
      
      /* T·∫°o 3 v√≤ng s√≥ng v·ªõi delay kh√°c nhau */
      .music-wave:nth-child(1) { animation-delay: 0s; }
      .music-wave:nth-child(2) { animation-delay: 0.5s; }
      .music-wave:nth-child(3) { animation-delay: 1s; }
      
      @keyframes musicWave {
        0% {
          transform: scale(1);
          opacity: 0.8;
          border-width: 2px;
        }
        100% {
          transform: scale(3);
          opacity: 0;
          border-width: 0px;
        }
      }

      /* Hi·ªáu ·ª©ng v·ªát tim theo chu·ªôt */
      .trail-heart {
        position: fixed;
        pointer-events: none;
        color: #ff69b4;
        font-size: 15px;
        animation: fadeUp 1s ease-out forwards;
      }

      @keyframes fadeUp {
        to {
          transform: translateY(-50px) scale(0);
          opacity: 0;
        }
      }
    </style>
  </head>
  <body>
    <!-- M√†n h√¨nh ch·ªù: H·ªôp th∆∞ 3D -->
    <div id="intro-screen">
      <div class="envelope-container" id="envelope">
        <div class="letter">
           <div class="letter-heart">
             <!-- D√πng SVG thay v√¨ Emoji ƒë·ªÉ tr√°nh l·ªói hi·ªÉn th·ªã -->
             <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
               <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
             </svg>
           </div>
        </div>
      </div>
      <div id="intro-text">Ch·∫°m ƒë·ªÉ m·ªü tim m√¨nh n√®...</div>
    </div>

    <!-- Container ch·ª©a c√°c hi·ªáu ·ª©ng -->
    <div id="stars"></div>
    <div id="fireflies-container"></div> <!-- Container cho ƒëom ƒë√≥m -->
    <div id="floating-container"></div>

    <!-- Th√¥ng ƒëi·ªáp ch√≠nh (·∫©n) -->
    <div id="love-message">
      <h1 id="typewriter-text"></h1>
    </div>

    <!-- H∆∞·ªõng d·∫´n (t√πy ch·ªçn) - ·∫®n ban ƒë·∫ßu -->
    <div id="hint" style="opacity: 0">Ch·∫°m v√†o m√†n h√¨nh nh√©... üíñ</div>

    <!-- N√∫t ƒëi·ªÅu khi·ªÉn nh·∫°c (·∫©n ban ƒë·∫ßu) -->
    <div id="music-control">
      <!-- C√°c v√≤ng s√≥ng nh·∫°c -->
      <div class="music-wave"></div>
      <div class="music-wave"></div>
      <div class="music-wave"></div>
      üéµ
    </div>

    <!-- √Çm thanh n·ªÅn -->
    <!-- L∆∞u √Ω: Thay ƒë·ªïi src th√†nh ƒë∆∞·ªùng d·∫´n nh·∫°c c·ªßa b·∫°n -->
    <audio id="bg-music" loop>
      <source
        src="music/love.mp3"
        type="audio/mpeg"
      />
      Your browser does not support the audio element.
    </audio>

    <script>
      /*
       * C·∫§U H√åNH N·ªòI DUNG
       */
      const messages = [
        "Anh y√™u em r·∫•t nhi·ªÅu üíñ",
        "Happy Valentine üåπ",
        "M√£i b√™n nhau nh√©",
        "Em l√† ƒëi·ªÅu tuy·ªát v·ªùi nh·∫•t",
        "Love you to the moon üåô",
        "My happiness is you",
        "Y√™u em 3000 ‚ù§Ô∏è",
        "Baby I love you",
        "M√£i y√™u em üíï",
      ];

      // DANH S√ÅCH ·∫¢NH (ƒê√£ b·ªã x√≥a h·∫øt n√™n ƒë·ªÉ tr·ªëng ho·∫∑c x√≥a h√†m g·ªçi ·∫£nh)
      const images = [];

      const container = document.getElementById("floating-container");
      const bgMusic = document.getElementById("bg-music");
      const loveMessage = document.getElementById("love-message");
      const hint = document.getElementById("hint");
      const introScreen = document.getElementById("intro-screen");
      const musicBtn = document.getElementById("music-control");

      /*
       * 1. HI·ªÜU ·ª®NG SAO TR·ªúI
       */
      function createStars() {
        const starCount = 150;
        const starContainer = document.getElementById("stars");

        for (let i = 0; i < starCount; i++) {
          const star = document.createElement("div");
          star.classList.add("star");

          // V·ªã tr√≠ ng·∫´u nhi√™n
          const x = Math.random() * window.innerWidth;
          const y = Math.random() * window.innerHeight;

          // K√≠ch th∆∞·ªõc ng·∫´u nhi√™n (1px - 3px)
          const size = Math.random() * 2 + 1;

          // Th·ªùi gian l·∫•p l√°nh ng·∫´u nhi√™n
          const duration = Math.random() * 3 + 1;

          star.style.left = `${x}px`;
          star.style.top = `${y}px`;
          star.style.width = `${size}px`;
          star.style.height = `${size}px`;
          star.style.animationDuration = `${duration}s`;

          starContainer.appendChild(star);
        }
      }

      /*
       * 2. T·∫†O CH·ªÆ BAY L√äN
       */
      function createFloatingText() {
        const text = document.createElement("div");
        text.classList.add("floating-text");

        // Ch·ªçn n·ªôi dung ng·∫´u nhi√™n
        text.innerText = messages[Math.floor(Math.random() * messages.length)];

        // V·ªã tr√≠ xu·∫•t ph√°t ng·∫´u nhi√™n theo chi·ªÅu ngang
        text.style.left = Math.random() * 90 + "%"; // 0 - 90%

        // K√≠ch th∆∞·ªõc ng·∫´u nhi√™n
        text.style.fontSize = Math.random() * 20 + 20 + "px"; // 20px - 40px

        // Th·ªùi gian bay ng·∫´u nhi√™n
        text.style.animationDuration = Math.random() * 5 + 10 + "s"; // 10s - 15s

        container.appendChild(text);

        // X√≥a element sau khi animation k·∫øt th√∫c ƒë·ªÉ tr√°nh n·∫∑ng m√°y
        setTimeout(() => {
          text.remove();
        }, 15000);
      }

      /*
       * 3. T·∫†O ·∫¢NH BAY
       */
      function createFloatingImage() {
        const img = document.createElement("img");
        img.classList.add("floating-image");

        // Ch·ªçn ·∫£nh ng·∫´u nhi√™n
        const randomSrc = images[Math.floor(Math.random() * images.length)];
        img.src = randomSrc;

        // X·ª≠ l√Ω khi ·∫£nh kh√¥ng t·ªìn t·∫°i (·∫©n ƒëi ƒë·ªÉ kh√¥ng hi·ªán icon l·ªói)
        img.onerror = function() {
          this.style.display = 'none';
        };

        // V·ªã tr√≠ xu·∫•t ph√°t
        img.style.left = Math.random() * 90 + "%";

        // Random h∆∞·ªõng bay ngang (ƒë·ªÉ t·∫°o c·∫£m gi√°c tr√¥i t·ª± nhi√™n h∆°n)
        const moveX = (Math.random() - 0.5) * 200; // -100px ƒë·∫øn 100px
        img.style.setProperty("--moveX", `${moveX}px`);

        container.appendChild(img);

        setTimeout(() => {
          img.remove();
        }, 20000);
      }

      /*
       * X·ª¨ L√ù S·ª∞ KI·ªÜN NG∆Ø·ªúI D√ôNG
       */
      
      // 1. Click v√†o m√†n h√¨nh Intro
      introScreen.addEventListener("click", (e) => {
         e.stopPropagation();
         
         const envelope = document.getElementById("envelope");
         envelope.classList.add("open"); // K√≠ch ho·∫°t animation m·ªü th∆∞
         
         // Ph√°t nh·∫°c ngay
         bgMusic.play()
           .then(() => {
              isPlaying = true;
              musicBtn.style.animationPlayState = "running";
              // Ch·∫°y s√≥ng nh·∫°c
              document.querySelectorAll(".music-wave").forEach(w => w.style.animationPlayState = "running");
           })
           .catch(e => console.log("L·ªói: " + e));
         
         // Sau khi m·ªü th∆∞ xong (kho·∫£ng 2s) th√¨ m·ªõi ·∫©n intro
         setTimeout(() => {
             introScreen.style.opacity = "0";
             setTimeout(() => {
                introScreen.style.display = "none";
             }, 1500);
             
             // Hi·ªán c√°c th√†nh ph·∫ßn ch√≠nh
             container.style.opacity = "1";
             musicBtn.style.opacity = "1";
             if (hint) hint.style.opacity = "1";
             
             // B·∫Øt ƒë·∫ßu hi·ªáu ·ª©ng
             setInterval(createFloatingText, 2500);
             setInterval(createFloatingImage, 4000);
             setInterval(createMeteor, 2000);
         }, 2500); // ƒê·ª£i l√° th∆∞ bay l√™n h·∫øt
      });

      // 2. Click v√†o m√†n h√¨nh (Sau khi ƒë√£ v√†o trang, thay v√¨ double click)
      document.body.addEventListener("click", () => {
          // Ch·ªâ hi·ªán khi intro ƒë√£ ·∫©n
          if (introScreen.style.opacity === "0" || introScreen.style.display === "none") {
              loveMessage.classList.add("show");
              startTypewriter(); // B·∫Øt ƒë·∫ßu g√µ ch·ªØ
              createHeartExplosion();
              
              if (hint) hint.style.opacity = "0";
          }
      });

      // B·ªè logic click 1 l·∫ßn c≈© ƒëi v√¨ ƒë√£ c√≥ Intro Screen
      // document.body.addEventListener("click", ...);

      /*
       * H√†m ph·ª•: Hi·ªáu ·ª©ng g√µ ch·ªØ (Typewriter)
       */
      const fullMessage = "ChuÃÅc em valentine vuiii veÃâee üíï";
      const typeTextElement = document.getElementById("typewriter-text");
      let isTyping = false;
      
      function startTypewriter() {
        if (isTyping) return; // Tr√°nh g·ªçi l·∫°i khi ƒëang g√µ
        isTyping = true;
        
        typeTextElement.classList.add("typing-cursor"); // Th√™m con tr·ªè nh·∫•p nh√°y
        typeTextElement.innerText = ""; // X√≥a tr·∫Øng tr∆∞·ªõc khi g√µ
        
        let i = 0;
        const typingSpeed = 100; // T·ªëc ƒë·ªô g√µ (ms)
        
        function type() {
          if (i < fullMessage.length) {
            typeTextElement.innerText += fullMessage.charAt(i);
            i++;
            setTimeout(type, typingSpeed);
          } else {
            // Khi g√µ xong th√¨ b·ªè con tr·ªè nh·∫•p nh√°y (ho·∫∑c gi·ªØ l·∫°i t√πy th√≠ch)
            typeTextElement.classList.remove("typing-cursor");
          }
        }
        
        type();
      }

      /*
       * H√†m ph·ª•: Hi·ªáu ·ª©ng tim bay khi double click
       */
      function createHeartExplosion() {
        for (let i = 0; i < 30; i++) {
          const heart = document.createElement("div");
          heart.innerText = "üíñ";
          heart.style.position = "fixed";
          heart.style.left = "50%";
          heart.style.top = "50%";
          heart.style.fontSize = Math.random() * 20 + 20 + "px";
          heart.style.transform = `translate(-50%, -50%)`;
          heart.style.pointerEvents = "none";
          heart.style.transition = "all 1s ease-out";

          document.body.appendChild(heart);

          // K√≠ch ho·∫°t transition
          requestAnimationFrame(() => {
            const x = (Math.random() - 0.5) * window.innerWidth * 0.5;
            const y = (Math.random() - 0.5) * window.innerHeight * 0.5;
            heart.style.transform = `translate(${x}px, ${y}px) scale(0)`;
            heart.style.opacity = 0;
          });

          setTimeout(() => heart.remove(), 1000);
        }
      }

      /*
       * 5. HI·ªÜU ·ª®NG V·ªÜT TIM THEO CHU·ªòT / TAY
       */
      function createTrailHeart(x, y) {
        const heart = document.createElement("div");
        heart.classList.add("trail-heart");
        heart.innerText = "‚ù§";
        heart.style.left = x + "px";
        heart.style.top = y + "px";
        document.body.appendChild(heart);
        
        setTimeout(() => heart.remove(), 1000);
      }

      // Desktop
      document.addEventListener("mousemove", (e) => {
        // T·∫°o tim kh√¥ng qu√° d√†y ƒë·∫∑c (gi·∫£m lag)
        if (Math.random() < 0.3) {
           createTrailHeart(e.clientX, e.clientY);
        }
      });
      
      // Mobile
      document.addEventListener("touchmove", (e) => {
        const touch = e.touches[0];
        if (Math.random() < 0.3) {
           createTrailHeart(touch.clientX, touch.clientY);
        }
      });

      /*
       * 6. N√öT NH·∫†C
       */
      // const musicBtn = document.getElementById("music-control"); // ƒê√£ khai b√°o ·ªü tr√™n
      let isPlaying = false;
      
      function toggleMusic() {
        const waves = document.querySelectorAll(".music-wave");
        if (isPlaying) {
          bgMusic.pause();
          musicBtn.style.animationPlayState = "paused";
          musicBtn.style.opacity = "0.5";
          waves.forEach(w => w.style.animationPlayState = "paused");
        } else {
          bgMusic.play().catch(e => console.log("Ch∆∞a t∆∞∆°ng t√°c"));
          musicBtn.style.animationPlayState = "running";
          musicBtn.style.opacity = "1";
          waves.forEach(w => w.style.animationPlayState = "running");
        }
        isPlaying = !isPlaying;
      }
      
      musicBtn.addEventListener("click", (e) => {
        e.stopPropagation(); // NgƒÉn s·ª± ki·ªán click lan ra body
        toggleMusic();
      });

      // C·∫≠p nh·∫≠t tr·∫°ng th√°i n√∫t nh·∫°c khi click v√†o body
      bgMusic.onplay = () => {
         isPlaying = true;
         musicBtn.style.animationPlayState = "running";
         musicBtn.style.opacity = "1";
         document.querySelectorAll(".music-wave").forEach(w => w.style.animationPlayState = "running");
      };

      /*
       * KH·ªûI CH·∫†Y
       */
      createStars();

      // T·∫°o text & ·∫£nh ƒë·ªãnh k·ª≥
      setInterval(createFloatingText, 2000);
      setInterval(createFloatingImage, 4000);
      
      /*
       * 7. HI·ªÜU ·ª®NG ƒêOM ƒê√ìM (FIREFLIES)
       */
      function createFireflies() {
         const container = document.getElementById("fireflies-container");
         const count = 100; // TƒÉng s·ªë l∆∞·ª£ng ƒëom ƒë√≥m l√™n nhi·ªÅu h∆°n
         const fireflies = [];
         
         for(let i=0; i<count; i++) {
             const fly = document.createElement("div");
             fly.classList.add("firefly");
             
             // V·ªã tr√≠ ng·∫´u nhi√™n
             let x = Math.random() * window.innerWidth;
             let y = Math.random() * window.innerHeight;
             
             // T·ªëc ƒë·ªô di chuy·ªÉn ng·∫´u nhi√™n
             let vx = (Math.random() - 0.5) * 2; 
             let vy = (Math.random() - 0.5) * 2;
             
             fly.style.left = x + "px";
             fly.style.top = y + "px";
             
             container.appendChild(fly);
             
             fireflies.push({
                 element: fly,
                 x: x,
                 y: y,
                 vx: vx,
                 vy: vy,
                 baseVx: vx, // L∆∞u t·ªëc ƒë·ªô g·ªëc ƒë·ªÉ h·ªìi ph·ª•c
                 baseVy: vy
             });
         }
         
         // Animation loop cho ƒëom ƒë√≥m
         function animateFireflies() {
             fireflies.forEach(fly => {
                 // C·∫≠p nh·∫≠t v·ªã tr√≠
                 fly.x += fly.vx;
                 fly.y += fly.vy;
                 
                 // Va ch·∫°m bi√™n (n·∫£y l·∫°i)
                 if(fly.x < 0 || fly.x > window.innerWidth) fly.vx *= -1;
                 if(fly.y < 0 || fly.y > window.innerHeight) fly.vy *= -1;
                 
                 // Gi·∫£m t·ªëc ƒë·ªô t·∫£n ra t·ª´ t·ª´ v·ªÅ t·ªëc ƒë·ªô g·ªëc (ma s√°t ·∫£o)
                 fly.vx += (fly.baseVx - fly.vx) * 0.05;
                 fly.vy += (fly.baseVy - fly.vy) * 0.05;
                 
                 fly.element.style.left = fly.x + "px";
                 fly.element.style.top = fly.y + "px";
                 
                 // Hi·ªáu ·ª©ng nh·∫•p nh√°y ng·∫´u nhi√™n
                 fly.element.style.opacity = 0.5 + Math.random() * 0.5;
             });
             requestAnimationFrame(animateFireflies);
         }
         animateFireflies();
         
         // T∆∞∆°ng t√°c chu·ªôt: ƒêom ƒë√≥m t·∫£n ra
         document.addEventListener("mousemove", (e) => {
             const mouseX = e.clientX;
             const mouseY = e.clientY;
             
             fireflies.forEach(fly => {
                 const dx = fly.x - mouseX;
                 const dy = fly.y - mouseY;
                 const dist = Math.sqrt(dx*dx + dy*dy);
                 
                 // N·∫øu chu·ªôt l·∫°i g·∫ßn (b√°n k√≠nh 100px)
                 if(dist < 100) {
                     // ƒê·∫©y ƒëom ƒë√≥m ra xa chu·ªôt
                     const angle = Math.atan2(dy, dx);
                     const force = (100 - dist) / 5; // C√†ng g·∫ßn c√†ng ƒë·∫©y m·∫°nh
                     
                     fly.vx += Math.cos(angle) * force;
                     fly.vy += Math.sin(angle) * force;
                 }
             });
         });
      }
      
      // Ch·∫°y hi·ªáu ·ª©ng ƒëom ƒë√≥m
      createFireflies();
    </script>
  </body>
</html>
